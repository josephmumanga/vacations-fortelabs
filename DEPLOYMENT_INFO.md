# Deployment Information

## Azure Resources Created

### Resource Group
- **Name:** `vacations-rg`
- **Location:** East US 2

### Azure SQL Database
- **Server Name:** `vacations-sql-4819.database.windows.net`
- **Database Name:** `vacations-db`
- **Admin Username:** `vacationsadmin`
- **Admin Password:** `Vacations2024!Secure`
- **Tier:** Free (100,000 vCore seconds/month, 32 GB storage)
- **Schema:** ✅ Deployed successfully

### Azure Static Web App
- **Name:** `vacations-app`
- **Default Hostname:** `gray-river-049f4f80f.3.azurestaticapps.net`
- **Custom Domain:** `vacations.fortelabs.cloud` ✅ Configured
- **Status:** Ready

### Environment Variables (Configured)
- `AZURE_SQL_SERVER=vacations-sql-4819.database.windows.net`
- `AZURE_SQL_DATABASE=vacations-db`
- `AZURE_SQL_USER=vacationsadmin`
- `AZURE_SQL_PASSWORD=Vacations2024!Secure`
- `JWT_SECRET=<auto-generated>`

## Deployment Token
```
d750df013e5e960526cbc5862128cc996e71bbebdddde3b68212bbdf0f4b3f2003-34740af1-a04b-4b95-80a8-341773fcc7eb00f0322049f4f80f
```

## DNS Configuration
- **CNAME Record:** `vacations.fortelabs.cloud` → `gray-river-049f4f80f.3.azurestaticapps.net` ✅ Configured

## Next Steps

### 1. Deploy the Application

You can deploy using one of these methods:

#### Option A: GitHub Actions (Recommended)
1. Push your code to a GitHub repository
2. In Azure Portal, go to your Static Web App
3. Click "Manage deployment token" and copy the token
4. In GitHub, go to Settings > Secrets > Actions
5. Add a secret named `AZURE_STATIC_WEB_APPS_API_TOKEN` with the deployment token
6. Create a GitHub Actions workflow (Azure will auto-generate one)

#### Option B: Azure CLI
```bash
# Build the app
npm run build

# Deploy using Azure CLI
az staticwebapp deploy \
  --name vacations-app \
  --resource-group vacations-rg \
  --api-location api \
  --app-location dist \
  --deployment-token <deployment-token>
```

#### Option C: VS Code Extension
1. Install "Azure Static Web Apps" extension in VS Code
2. Right-click on your project folder
3. Select "Deploy to Static Web App"
4. Choose `vacations-app`

### 2. Create Admin User

After deployment, create the admin user:

1. Go to `https://vacations.fortelabs.cloud`
2. Click "Sign up"
3. Use email: `centro.id@forteinnovation.mx`
4. Use password: `admin123`
5. The system will automatically assign Admin role

### 3. Test the Application

1. Visit `https://vacations.fortelabs.cloud`
2. Sign up or sign in with a `@forteinnovation.mx` email
3. Test creating vacation requests
4. Test the approval workflow

## Security Notes

⚠️ **Important:** 
- Change the SQL admin password in production
- Update JWT_SECRET to a strong random value
- Consider using Azure Key Vault for sensitive credentials
- Enable HTTPS only (should be automatic with Static Web Apps)

## Connection String Format

For reference, the connection string format is:
```
Server=vacations-sql-4819.database.windows.net;Database=vacations-db;User Id=vacationsadmin;Password=Vacations2024!Secure;Encrypt=True;
```

## Troubleshooting

### If the app doesn't load:
1. Check DNS propagation: `nslookup vacations.fortelabs.cloud`
2. Verify CNAME record points to: `gray-river-049f4f80f.3.azurestaticapps.net`
3. Check Azure Static Web App logs in Azure Portal

### If API calls fail:
1. Verify environment variables are set in Azure Portal
2. Check Azure Functions logs in Azure Portal
3. Verify SQL Database firewall allows Azure services

### If database connection fails:
1. Check firewall rules allow Azure services (0.0.0.0 - 0.0.0.0)
2. Verify connection string in environment variables
3. Test connection using Azure Portal query editor



